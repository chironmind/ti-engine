"use strict";(self.webpackChunkti_engine_docs=self.webpackChunkti_engine_docs||[]).push([[612],{2077:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"howto/choose-constant-model","title":"How to determine the best ConstantModelType for a ti-engine function","description":"This guide shows how to programmatically determine the best ConstantModelType for your indicator using the JavaScript package ti-engine.","source":"@site/docs/howto/choose-constant-model.md","sourceDirName":"howto","slug":"/howto/choose-constant-model","permalink":"/docs/docs/howto/choose-constant-model","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"When to choose bulk vs single functions in ti-engine","permalink":"/docs/docs/howto/bulk-vs-single"},"next":{"title":"How to determine the best DeviationModel for a ti-engine function","permalink":"/docs/docs/howto/choose-deviation-model"}}');var o=t(4848),s=t(8453);const r={},l="How to determine the best ConstantModelType for a ti-engine function",a={},d=[{value:"\ud83c\udfaf Goal",id:"-goal",level:2},{value:"\ud83d\udce6 Requirements",id:"-requirements",level:2},{value:"\ud83d\udcbb Step-by-Step",id:"-step-by-step",level:2},{value:"1. Use an in-memory dataset",id:"1-use-an-in-memory-dataset",level:3},{value:"2. Calculate the RSI for multiple constant models",id:"2-calculate-the-rsi-for-multiple-constant-models",level:3},{value:"3. Rate each RSI to find the best",id:"3-rate-each-rsi-to-find-the-best",level:3},{value:"4. Full example",id:"4-full-example",level:3},{value:"\ud83e\uddea Example Output",id:"-example-output",level:2},{value:"\u2705 Next Steps",id:"-next-steps",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"how-to-determine-the-best-constantmodeltype-for-a-ti-engine-function",children:"How to determine the best ConstantModelType for a ti-engine function"})}),"\n",(0,o.jsx)(n.p,{children:"This guide shows how to programmatically determine the best ConstantModelType for your indicator using the JavaScript package ti-engine."}),"\n",(0,o.jsx)(n.p,{children:"The rating model is overly simplified and should be refined to suit your needs before usage."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-goal",children:"\ud83c\udfaf Goal"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Determine the best ConstantModelType for the RSI using an in-memory dataset"}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-requirements",children:"\ud83d\udce6 Requirements"}),"\n",(0,o.jsx)(n.p,{children:"Install ti-engine:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# npm\nnpm install ti-engine\n\n# yarn\nyarn add ti-engine\n\n# pnpm\npnpm add ti-engine\n"})}),"\n",(0,o.jsx)(n.p,{children:"Initialize (recommended, required in browsers):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'import init from "ti-engine";\n\nawait init(); // In Node it\'s a no-op; in browsers it loads WASM\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-step-by-step",children:"\ud83d\udcbb Step-by-Step"}),"\n",(0,o.jsx)(n.h3,{id:"1-use-an-in-memory-dataset",children:"1. Use an in-memory dataset"}),"\n",(0,o.jsx)(n.p,{children:"For this guide, we\u2019ll use a constant array of prices:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const data = [\n  6037.59, 5970.84, 5906.94, 5881.63, 5868.55, 5942.47, 5975.38, 5909.03,\n  5918.25, 5827.04, 5836.22, 5842.91, 5949.91, 5937.34, 5996.66, 6049.24,\n  6086.37, 6118.71, 6101.24, 6012.28, 6067.70, 6039.31, 6071.17, 6040.53,\n  5994.57, 6037.88, 6061.48, 6083.57, 6025.99, 6066.44, 6068.50, 6051.97,\n  6115.07, 6114.63, 6129.58, 6144.15, 6117.52, 6013.13, 5983.25, 5955.25,\n  5956.06, 5861.57, 5954.50, 5849.72, 5778.15, 5842.63, 5738.52, 5770.20,\n  5614.56, 5572.07, 5599.30, 5521.52, 5638.94\n];\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-calculate-the-rsi-for-multiple-constant-models",children:"2. Calculate the RSI for multiple constant models"}),"\n",(0,o.jsx)(n.p,{children:"The default model for the RSI is a smoothed moving average."}),"\n",(0,o.jsx)(n.p,{children:"We\u2019ll test several models and compute the RSI series for each using the bulk function."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'import init, { momentumIndicators, ConstantModelType } from "ti-engine";\n\nawait init();\n\nconst period = 14;\nconst models = [\n  ConstantModelType.SimpleMovingAverage,\n  ConstantModelType.SmoothedMovingAverage,\n  ConstantModelType.ExponentialMovingAverage,\n  ConstantModelType.SimpleMovingMedian,\n  ConstantModelType.SimpleMovingMode,\n];\n\n// Example:\n// const rsiSeries = momentumIndicators.bulk.relativeStrengthIndex(data, model, period);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"3-rate-each-rsi-to-find-the-best",children:"3. Rate each RSI to find the best"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"The logic is overly simple for the purpose of the guide."}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"If RSI > 70 (overbought) and the next price < current price, the model gets +1"}),"\n",(0,o.jsx)(n.li,{children:"If RSI < 30 (oversold) and the next price > current price, the model gets +1"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:'We normalize the score by the number of "attempts" (how many times we evaluated a signal).'}),"\n",(0,o.jsx)(n.p,{children:"Alignment note for bulk outputs:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"momentumIndicators.bulk.relativeStrengthIndex(prices, model, period) returns an array of length prices.length - period + 1"}),"\n",(0,o.jsx)(n.li,{children:"rsiSeries[0] corresponds to the window anchoring at prices[period - 1]"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'import { momentumIndicators, ConstantModelType } from "ti-engine";\n\n/**\n * Returns { model: ConstantModelType, rating: number }\n */\nfunction chooseBestRsiModel(prices, period = 14) {\n  const models = [\n    ConstantModelType.SimpleMovingAverage,\n    ConstantModelType.SmoothedMovingAverage,\n    ConstantModelType.ExponentialMovingAverage,\n    ConstantModelType.SimpleMovingMedian,\n    ConstantModelType.SimpleMovingMode,\n  ];\n\n  let bestRating = -1;\n  let bestModel = models[0];\n\n  for (const m of models) {\n    const rsi = momentumIndicators.bulk.relativeStrengthIndex(prices, m, period);\n\n    let currentRating = 0;\n    let attempts = 0;\n\n    // rsi[0] anchors at prices[period - 1]\n    for (let i = period - 1; i < prices.length - 1; i++) {\n      const rsiVal = rsi[i - (period - 1)];\n\n      // Overbought condition: expect price drop next step\n      if (rsiVal > 70) {\n        attempts += 1;\n        if (prices[i + 1] < prices[i]) currentRating += 1;\n      }\n\n      // Oversold condition: expect price rise next step\n      if (rsiVal < 30) {\n        attempts += 1;\n        if (prices[i + 1] > prices[i]) currentRating += 1;\n      }\n    }\n\n    const averageRating = attempts > 0 ? currentRating / attempts : 0;\n    if (averageRating > bestRating) {\n      bestRating = averageRating;\n      bestModel = m;\n    }\n  }\n\n  return { model: bestModel, rating: bestRating };\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"4-full-example",children:"4. Full example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'import init, { momentumIndicators, ConstantModelType } from "ti-engine";\n\nawait init();\n\nconst data = [\n  6037.59, 5970.84, 5906.94, 5881.63, 5868.55, 5942.47, 5975.38, 5909.03,\n  5918.25, 5827.04, 5836.22, 5842.91, 5949.91, 5937.34, 5996.66, 6049.24,\n  6086.37, 6118.71, 6101.24, 6012.28, 6067.70, 6039.31, 6071.17, 6040.53,\n  5994.57, 6037.88, 6061.48, 6083.57, 6025.99, 6066.44, 6068.50, 6051.97,\n  6115.07, 6114.63, 6129.58, 6144.15, 6117.52, 6013.13, 5983.25, 5955.25,\n  5956.06, 5861.57, 5954.50, 5849.72, 5778.15, 5842.63, 5738.52, 5770.20,\n  5614.56, 5572.07, 5599.30, 5521.52, 5638.94\n];\n\nfunction chooseBestRsiModel(prices, period = 14) {\n  const models = [\n    ConstantModelType.SimpleMovingAverage,\n    ConstantModelType.SmoothedMovingAverage,\n    ConstantModelType.ExponentialMovingAverage,\n    ConstantModelType.SimpleMovingMedian,\n    ConstantModelType.SimpleMovingMode,\n  ];\n\n  let bestRating = -1;\n  let bestModel = models[0];\n\n  for (const m of models) {\n    const rsi = momentumIndicators.bulk.relativeStrengthIndex(prices, m, period);\n\n    let currentRating = 0;\n    let attempts = 0;\n\n    for (let i = period - 1; i < prices.length - 1; i++) {\n      const rsiVal = rsi[i - (period - 1)];\n\n      if (rsiVal > 70) {\n        attempts += 1;\n        if (prices[i + 1] < prices[i]) currentRating += 1;\n      }\n      if (rsiVal < 30) {\n        attempts += 1;\n        if (prices[i + 1] > prices[i]) currentRating += 1;\n      }\n    }\n\n    const averageRating = attempts > 0 ? currentRating / attempts : 0;\n    if (averageRating > bestRating) {\n      bestRating = averageRating;\n      bestModel = m;\n    }\n  }\n\n  return { model: bestModel, rating: bestRating };\n}\n\nconst { model, rating } = chooseBestRsiModel(data, 14);\n\n// Optional: pretty-print the enum\nconst modelName =\n  Object.entries(ConstantModelType).find(([, v]) => v === model)?.[0] ??\n  String(model);\n\nconsole.log(`Best model for RSI is ${modelName} with a rating of ${rating}`);\n'})}),"\n",(0,o.jsx)(n.p,{children:"Notes:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Valid ConstantModelType values:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"ConstantModelType.SimpleMovingAverage"}),"\n",(0,o.jsx)(n.li,{children:"ConstantModelType.SmoothedMovingAverage"}),"\n",(0,o.jsx)(n.li,{children:"ConstantModelType.ExponentialMovingAverage"}),"\n",(0,o.jsx)(n.li,{children:"ConstantModelType.SimpleMovingMedian"}),"\n",(0,o.jsx)(n.li,{children:"ConstantModelType.SimpleMovingMode"}),"\n",(0,o.jsx)(n.li,{children:"ConstantModelType.PersonalisedMovingAverage (advanced; not used here)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-example-output",children:"\ud83e\uddea Example Output"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"Best model for RSI is SmoothedMovingAverage with a rating of 0.57\n"})}),"\n",(0,o.jsx)(n.p,{children:"(Output will vary with data and scoring rules.)"}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-next-steps",children:"\u2705 Next Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Programmatically choose a period (e.g., grid search over common RSI periods like 7, 14, 21)"}),"\n",(0,o.jsx)(n.li,{children:"Combine period selection and constant model selection"}),"\n",(0,o.jsx)(n.li,{children:"Introduce punishment to the rating system (e.g., penalize false signals or whipsaws)"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(6540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);